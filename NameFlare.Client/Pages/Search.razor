@rendermode InteractiveWebAssembly
@page "/"
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=image" />

@inject NameFlare.Client.Services.NomeService NomeService

@inject NavigationManager Navigation

<section class="pagina">

    <header>
        <div>
            <label for="menu" class="titulo">
                AUTENTICAR-SE
            </label>

            <button id="menu" class="menu">
                <span class="material-symbols-outlined">
                    image
                </span>

            </button>
        </div>
    </header>

    <main>      

         <section class="Search">
            <div class="nome-app">
                <div class="logo">
                    <p>NAMEFLARE</p>
                </div>
                <div class="botao-assinatura">
                    <button>
                        <p>ASSINAR - $1/MÊS</p>
                    </button>
                </div>
            </div>

            <div class="consulta" @onsubmit="PreventDefault">
                <label for="nome">Digite seu primeiro nome...</label>
                <input id="nome" @bind="nome" type="text" />
                <div class="botao-acao">
                    <button type="button" @onclick="BuscarNome">DESCOBRIR</button>
                </div>
            </div>

            @if (resultados?.Length > 0)
            {
              <div class="resultados">
                    @foreach (var resultado in resultados)
                    {
                        <div class="resultado">
                            <div class="imagem">
                                <span class="material-symbols-outlined">
                                    image
                                </span>
                            </div>
                            <div class="nome">
                                <h2 class="nome">@resultado</h2>
                                <p>Mais buscado</p>
                            </div>
                        </div>
                    }
                </div>
            }

        </section> 




    </main>

</section>

@code {   
    private string? nome;
    private string[]?  resultados;
     
    private Task PreventDefault() => Task.CompletedTask;

    private async Task BuscarNome()
    {
        if (string.IsNullOrWhiteSpace(nome))
            return;

        resultados = await NomeService.BuscarMaisPesquisadosAsync(nome);
    }


    private void Assinar()
    {
        // Lógica para pagamento futuro
    }
}
